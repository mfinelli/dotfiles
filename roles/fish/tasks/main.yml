---
- name: Creating fish configuration directory
  ansible.builtin.file:
    group: "{{ whoami_group }}"
    mode: "0700"
    owner: "{{ whoami }}"
    path: "{{ ansible_user_dir }}/.config/fish"
    state: directory

- name: Copying main fish configuration
  ansible.builtin.template:
    dest: "{{ ansible_user_dir }}/.config/fish/config.fish"
    group: "{{ whoami_group }}"
    mode: "0600"
    owner: "{{ whoami }}"
    src: config.fish.j2

# this is ok, because boostrap.bash calls dotfiles.yml as the playbook
- name: Linking starship configuration
  ansible.builtin.file:
    dest: "{{ ansible_user_dir }}/.config/starship.toml"
    src: "{{ playbook_dir }}/roles/fish/files/starship.toml"
    state: link
