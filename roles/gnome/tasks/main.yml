---
- name: enable keyboard layouts
  community.general.dconf:
    key: /org/gnome/desktop/input-sources/sources
    value: "[('xkb', 'us'), ('xkb', 'it')]"

- name: get the ID of the gnome terminal profile
  ansible.builtin.shell: dconf read /org/gnome/terminal/legacy/profiles:/list | awk -F\' '{print $2}'
  register: gnome_terminal_profile

- name: configure gnome terminal
  community.general.dconf:
    key: "/org/gnome/terminal/legacy/profiles:/:{{ gnome_terminal_profile.stdout }}/{{ item.key }}"
    value: "{{ item.value | string }}"
  loop:
    - key: visible-name
      value: "'mario'"
    - key: use-system-font
      value: "false"
    - key: font
      value: "'JetBrainsMono Nerd Font Mono 12'"
    - key: use-theme-colors
      value: "false"
    - key: foreground-color
      value: "'rgb(255,255,255)'"
    - key: background-color
      value: "'rgb(0,0,0)'"

- name: configure screen lock
  community.general.dconf:
    key: "{{ item.key }}"
    value: "{{ item.value }}"
  loop:
    - key: /org/gnome/desktop/screensaver/lock-delay
      value: uint32 0
    - key: /org/gnome/desktop/session/idle-delay
      value: uint32 600
    - key: /org/gnome/desktop/notifications/show-in-lock-screen
      value: "false"

- name: turn off natural scrolling
  community.general.dconf:
    key: /org/gnome/desktop/peripherals/touchpad/natural-scroll
    value: "false"

- name: never prompt or start programs on media insertion
  community.general.dconf:
    key: /org/gnome/desktop/media-handling/autorun-never
    value: "true"
